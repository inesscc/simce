
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../proc_tabla_99/">
      
      
        <link rel="next" href="../paralelizacion/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Recorte de subpreguntas - SIMCE Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#simce.proc_imgs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SIMCE Docs" class="md-header__button md-logo" aria-label="SIMCE Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SIMCE Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Recorte de subpreguntas
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo oscurso"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscurso" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SIMCE Docs" class="md-nav__button md-logo" aria-label="SIMCE Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    SIMCE Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentación Proyecto SIMCE
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial de uso
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../outputs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guía de outputs del proyecto
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../script_configuracion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cómo utilizar el script de configuración
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Manuales de referencia
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Manuales de referencia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../generar_insumos_img/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generación de insumos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../proc_tabla_99/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Procesamiento tabla dobles marcas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Recorte de subpreguntas
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Recorte de subpreguntas
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs" class="md-nav__link">
    <span class="md-ellipsis">
      proc_imgs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.bound_and_crop" class="md-nav__link">
    <span class="md-ellipsis">
      bound_and_crop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.crop_and_save_subpreg" class="md-nav__link">
    <span class="md-ellipsis">
      crop_and_save_subpreg
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.dejar_solo_recuadros_subpregunta" class="md-nav__link">
    <span class="md-ellipsis">
      dejar_solo_recuadros_subpregunta
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.eliminar_franjas_negras" class="md-nav__link">
    <span class="md-ellipsis">
      eliminar_franjas_negras
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_contornos_grandes" class="md-nav__link">
    <span class="md-ellipsis">
      get_contornos_grandes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_insumos" class="md-nav__link">
    <span class="md-ellipsis">
      get_insumos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_mascara_lineas_horizontales" class="md-nav__link">
    <span class="md-ellipsis">
      get_mascara_lineas_horizontales
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_pages_cuadernillo" class="md-nav__link">
    <span class="md-ellipsis">
      get_pages_cuadernillo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_pregunta_inicial_pagina" class="md-nav__link">
    <span class="md-ellipsis">
      get_pregunta_inicial_pagina
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_subpregs_distintas" class="md-nav__link">
    <span class="md-ellipsis">
      get_subpregs_distintas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.obtener_lineas_horizontales" class="md-nav__link">
    <span class="md-ellipsis">
      obtener_lineas_horizontales
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.partir_imagen_por_mitad" class="md-nav__link">
    <span class="md-ellipsis">
      partir_imagen_por_mitad
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.recorte_imagen" class="md-nav__link">
    <span class="md-ellipsis">
      recorte_imagen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.save_pregunta_completa" class="md-nav__link">
    <span class="md-ellipsis">
      save_pregunta_completa
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../paralelizacion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Procesamiento paralelizado
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../predicciones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Predicción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indicadores_tinta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indicadores de tinta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Funciones transversales
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs" class="md-nav__link">
    <span class="md-ellipsis">
      proc_imgs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.bound_and_crop" class="md-nav__link">
    <span class="md-ellipsis">
      bound_and_crop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.crop_and_save_subpreg" class="md-nav__link">
    <span class="md-ellipsis">
      crop_and_save_subpreg
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.dejar_solo_recuadros_subpregunta" class="md-nav__link">
    <span class="md-ellipsis">
      dejar_solo_recuadros_subpregunta
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.eliminar_franjas_negras" class="md-nav__link">
    <span class="md-ellipsis">
      eliminar_franjas_negras
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_contornos_grandes" class="md-nav__link">
    <span class="md-ellipsis">
      get_contornos_grandes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_insumos" class="md-nav__link">
    <span class="md-ellipsis">
      get_insumos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_mascara_lineas_horizontales" class="md-nav__link">
    <span class="md-ellipsis">
      get_mascara_lineas_horizontales
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_pages_cuadernillo" class="md-nav__link">
    <span class="md-ellipsis">
      get_pages_cuadernillo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_pregunta_inicial_pagina" class="md-nav__link">
    <span class="md-ellipsis">
      get_pregunta_inicial_pagina
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.get_subpregs_distintas" class="md-nav__link">
    <span class="md-ellipsis">
      get_subpregs_distintas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.obtener_lineas_horizontales" class="md-nav__link">
    <span class="md-ellipsis">
      obtener_lineas_horizontales
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.partir_imagen_por_mitad" class="md-nav__link">
    <span class="md-ellipsis">
      partir_imagen_por_mitad
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.recorte_imagen" class="md-nav__link">
    <span class="md-ellipsis">
      recorte_imagen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simce.proc_imgs.save_pregunta_completa" class="md-nav__link">
    <span class="md-ellipsis">
      save_pregunta_completa
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Recorte de subpreguntas</h1>

<p>En este manual se repasan las funciones asociadas al procesamiento de imágenes que permite un adecuado recorte de subpreguntas.</p>


<div class="doc doc-object doc-module">



<a id="simce.proc_imgs"></a>
    <div class="doc doc-contents first">

        <p>Created on Thu May  2 17:22:37 2024</p>
<p>@author: jeconchao</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.bound_and_crop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bound_and_crop</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">contorno</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Recibe un contorno, obtiene sus coordenadas y las corta desde la imagen ingresada.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen a recortarle un contorno.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>contorno</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>contorno a recortar de la imagen</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>buffer</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>opcionalmente se pueden agregar píxeles extra en torno al contorno, para obtener una imagen más amplia.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>contorno_recortado</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen correspondiente al recorte del contorno detectado.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">bound_and_crop</span><span class="p">(</span><span class="n">img</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">contorno</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Recibe un contorno, obtiene sus coordenadas y las corta desde la imagen ingresada.</span>

<span class="sd">    Args:</span>
<span class="sd">        img: imagen a recortarle un contorno.</span>

<span class="sd">        contorno: contorno a recortar de la imagen</span>

<span class="sd">        buffer: opcionalmente se pueden agregar píxeles extra en torno al contorno, para obtener una imagen más amplia.</span>

<span class="sd">    Returns:</span>
<span class="sd">        contorno_recortado: imagen correspondiente al recorte del contorno detectado.</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Obtengo coordenadas de contorno</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">contorno</span><span class="p">)</span>
    <span class="c1"># Recorto imagen en base a contorno</span>
    <span class="n">contorno_recortado</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span><span class="n">y</span><span class="o">+</span><span class="n">h</span><span class="o">+</span><span class="n">buffer</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="n">buffer</span><span class="p">):</span><span class="n">x</span><span class="o">+</span><span class="n">w</span><span class="o">+</span><span class="n">buffer</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">contorno_recortado</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.crop_and_save_subpreg" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">crop_and_save_subpreg</span><span class="p">(</span><span class="n">img_recuadros_pregunta</span><span class="p">,</span> <span class="n">lineas_horizontales</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">file_out</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Recorta subpregunta en base a líneas horizontales detectadas y luego la exporta. Si esta es más alta que ancha,
se le hace un giro de 90 grados, para que sea más ancha que alta. <strong>No retorna nada</strong>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img_recuadros_pregunta</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen con recuadros de una pregunta completa.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lineas_horizontales</code></td>
            <td>
                  <code>list[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>lista de líneas horizontales detectadas</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>i</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>elemento correspondiente línea horizontal siendo analizada actualmente.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>file_out</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ruta de la imagen a exportar.     </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>verbose</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>si es True, el código va a imprimir información más completa.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">crop_and_save_subpreg</span><span class="p">(</span><span class="n">img_recuadros_pregunta</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">lineas_horizontales</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
                           <span class="n">i</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">file_out</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span><span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Recorta subpregunta en base a líneas horizontales detectadas y luego la exporta. Si esta es más alta que ancha,</span>
<span class="sd">    se le hace un giro de 90 grados, para que sea más ancha que alta. **No retorna nada**.</span>

<span class="sd">    Args:</span>
<span class="sd">        img_recuadros_pregunta: imagen con recuadros de una pregunta completa.</span>

<span class="sd">        lineas_horizontales: lista de líneas horizontales detectadas</span>

<span class="sd">        i: elemento correspondiente línea horizontal siendo analizada actualmente.</span>

<span class="sd">        file_out: ruta de la imagen a exportar.     </span>

<span class="sd">        verbose: si es True, el código va a imprimir información más completa.    </span>

<span class="sd">    &#39;&#39;&#39;</span>


    <span class="n">img_subrptas</span> <span class="o">=</span> <span class="n">img_recuadros_pregunta</span><span class="p">[</span><span class="n">lineas_horizontales</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                                        <span class="n">lineas_horizontales</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">file_out</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">img_subrptas</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
     <span class="c1"># Si la subpregunta es más larga que ancha, la rotamos a lo ancho:</span>
    <span class="k">if</span> <span class="n">img_subrptas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">img_subrptas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">img_subrptas</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">img_subrptas</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ROTATE_90_CLOCKWISE</span><span class="p">)</span>

    <span class="c1"># print(file_out)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">file_out</span><span class="p">,</span> <span class="n">img_subrptas</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">file_out</span><span class="si">}</span><span class="s1"> guardado!&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.dejar_solo_recuadros_subpregunta" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dejar_solo_recuadros_subpregunta</span><span class="p">(</span><span class="n">img_pregunta</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Toma imagen recortada de una pregunta completa y vuelve a recortarla, usando máscaras
de forma que solo queden los recuadros de las respuestas de la pregunta, dejando fuera el texto.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img_pregunta</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen de una pregunta completa.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>img_recuadros</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen de recuadros de una pregunta completa</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">dejar_solo_recuadros_subpregunta</span><span class="p">(</span><span class="n">img_pregunta</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39; Toma imagen recortada de una pregunta completa y vuelve a recortarla, usando máscaras</span>
<span class="sd">        de forma que solo queden los recuadros de las respuestas de la pregunta, dejando fuera el texto.</span>

<span class="sd">        Args:</span>
<span class="sd">            img_pregunta: imagen de una pregunta completa.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img_recuadros: imagen de recuadros de una pregunta completa</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">img_pregunta_crop</span> <span class="o">=</span> <span class="n">img_pregunta</span><span class="p">[</span><span class="mi">60</span><span class="p">:</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span><span class="o">-</span><span class="mi">30</span><span class="p">]</span>
    <span class="n">mask_recuadro</span> <span class="o">=</span> <span class="n">get_mask_imagen</span><span class="p">(</span><span class="n">img_pregunta_crop</span><span class="p">,</span>
                           <span class="n">lower_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">224</span><span class="p">]),</span>
                           <span class="n">upper_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">179</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">255</span><span class="p">]),</span>
                           <span class="n">eliminar_manchas</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iters</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">revert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Si existen columnas blancas, las eliminamos:</span>
    <span class="n">mean_col</span> <span class="o">=</span> <span class="n">mask_recuadro</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mask_recuadro</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mean_col</span> <span class="o">&gt;</span> <span class="mi">200</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_RECT</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">mask_dilate</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">mask_recuadro</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Eliminamos manchas verticales y horizontales:</span>
    <span class="n">lim_vert</span> <span class="o">=</span> <span class="n">mask_recuadro</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">morph_vert</span> <span class="o">=</span> <span class="n">eliminar_o_rellenar_manchas</span><span class="p">(</span><span class="n">mask_dilate</span><span class="p">,</span> <span class="n">orientacion</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> 
                                             <span class="n">limite</span><span class="o">=</span><span class="n">lim_vert</span><span class="p">,</span> <span class="n">rellenar</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
    <span class="n">lim_hor</span> <span class="o">=</span> <span class="n">mask_recuadro</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">morph_hor</span> <span class="o">=</span> <span class="n">eliminar_o_rellenar_manchas</span><span class="p">(</span><span class="n">morph_vert</span><span class="p">,</span> <span class="n">orientacion</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
                                             <span class="n">limite</span><span class="o">=</span><span class="n">lim_hor</span><span class="p">,</span> <span class="n">rellenar</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>

    <span class="n">nonzero</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findNonZero</span><span class="p">(</span><span class="n">morph_hor</span><span class="p">)</span>

    <span class="n">img_recuadros</span> <span class="o">=</span> <span class="n">bound_and_crop</span><span class="p">(</span><span class="n">img_pregunta_crop</span><span class="p">,</span> <span class="n">nonzero</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>


    <span class="k">return</span> <span class="n">img_recuadros</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.eliminar_franjas_negras" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eliminar_franjas_negras</span><span class="p">(</span><span class="n">img_completa_crop</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Elimina franjas negras que en algunas ocasiones vienen desde el escaneo de las imágenes. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img_completa_crop</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen completa del cuadernillo, posterior a operación de crop exterior. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>img_no_franja</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen completa del cuadernillo, sin franjas negras, en caso de existir.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">eliminar_franjas_negras</span><span class="p">(</span><span class="n">img_completa_crop</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Elimina franjas negras que en algunas ocasiones vienen desde el escaneo de las imágenes. </span>

<span class="sd">    Args:</span>
<span class="sd">        img_completa_crop: imagen completa del cuadernillo, posterior a operación de crop exterior. </span>

<span class="sd">    Returns:</span>
<span class="sd">        img_no_franja: imagen completa del cuadernillo, sin franjas negras, en caso de existir.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">im2</span> <span class="o">=</span> <span class="n">get_mask_imagen</span><span class="p">(</span><span class="n">img_completa_crop</span><span class="p">,</span> <span class="n">lower_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">241</span><span class="p">]),</span>
                          <span class="n">upper_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">179</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]),</span> <span class="n">iters</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">im2</span><span class="p">[:,:</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
    <span class="n">im2</span><span class="p">[:,</span><span class="o">-</span><span class="mi">100</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">255</span>


    <span class="n">contours</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span>
        <span class="n">im2</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_NONE</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">area_cont</span> <span class="o">=</span> <span class="p">[</span><span class="n">cv2</span><span class="o">.</span><span class="n">contourArea</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">contours</span><span class="p">]</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">contours</span><span class="p">[</span><span class="n">area_cont</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">area_cont</span><span class="p">))]</span>

    <span class="c1"># Recortamos imagen según lo encontrado en máscara</span>
    <span class="n">img_no_franja</span> <span class="o">=</span> <span class="n">bound_and_crop</span><span class="p">(</span><span class="n">img_completa_crop</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">img_no_franja</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.get_contornos_grandes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_contornos_grandes</span><span class="p">(</span><span class="n">mask_deteccion_contornos</span><span class="p">,</span> <span class="n">limit_area</span><span class="o">=</span><span class="mi">30000</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Obtiene contornos de preguntas dentro de la página del cuadernillo. Como el algoritmo tiende a detectar más contornos
de los que nos interesan, solo dejamos los contornos grandes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>mask_deteccion_contornos</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>máscara que busca detectar zonas donde debiesen estar contornos. P/e: detecta preguntas
en imagen de página del cuadernillo. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit_area</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>área mínima que debe tener un contorno para que sea considerado</p>
              </div>
            </td>
            <td>
                  <code>30000</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>big_contours</code></td>            <td>
                  <code>list[<span title="numpy.ndarray">ndarray</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>lista con coordenadas de contornos grandes</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_contornos_grandes</span><span class="p">(</span><span class="n">mask_deteccion_contornos</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">limit_area</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">30000</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Obtiene contornos de preguntas dentro de la página del cuadernillo. Como el algoritmo tiende a detectar más contornos</span>
<span class="sd">    de los que nos interesan, solo dejamos los contornos grandes.</span>

<span class="sd">    Args:</span>
<span class="sd">        mask_deteccion_contornos: máscara que busca detectar zonas donde debiesen estar contornos. P/e: detecta preguntas</span>
<span class="sd">            en imagen de página del cuadernillo. </span>

<span class="sd">        limit_area: área mínima que debe tener un contorno para que sea considerado</span>

<span class="sd">    Returns:</span>
<span class="sd">        big_contours: lista con coordenadas de contornos grandes         </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Obtengo contornos</span>
    <span class="n">contours</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span>
        <span class="n">mask_deteccion_contornos</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_NONE</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># Me quedo contornos grandes</span>
    <span class="n">big_contours</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">contours</span> <span class="k">if</span> <span class="n">cv2</span><span class="o">.</span><span class="n">contourArea</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">limit_area</span><span class="p">]</span>

    <span class="n">big_contours</span> <span class="o">=</span> <span class="n">big_contours</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">big_contours</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.get_insumos" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_insumos</span><span class="p">(</span><span class="n">tipo_cuadernillo</span><span class="p">,</span> <span class="n">dir_insumos</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Carga insumos obtenidos en el <a href="../generar_insumos_img">módulo de generación de insumos</a></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>tipo_cuadernillo</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tipo de cuadernillo a revisar: "estudiantes" o "padres".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dir_insumos</code></td>
            <td>
                  <code><span title="os.PathLike">PathLike</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>directorio en el que se encuentran datos de insumos.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>insumos_total</code></td>            <td>
                  <code>tuple</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tupla que contiene cada uno de los insumos, es decir:
n_pages, n_preguntas, subpreg_x_preg, dic_cuadernillo, dic_pagina, n_subpreg_tot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_insumos</span><span class="p">(</span><span class="n">tipo_cuadernillo</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">dir_insumos</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Carga insumos obtenidos en el [módulo de generación de insumos](../generar_insumos_img)</span>

<span class="sd">    Args:</span>
<span class="sd">        tipo_cuadernillo: tipo de cuadernillo a revisar: &quot;estudiantes&quot; o &quot;padres&quot;.</span>

<span class="sd">        dir_insumos: directorio en el que se encuentran datos de insumos.</span>

<span class="sd">    Returns:</span>
<span class="sd">        insumos_total: tupla que contiene cada uno de los insumos, es decir:</span>
<span class="sd">            n_pages, n_preguntas, subpreg_x_preg, dic_cuadernillo, dic_pagina, n_subpreg_tot.</span>


<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dir_insumos</span> <span class="o">/</span> <span class="s1">&#39;insumos.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">insumos</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="c1"># Seleccionamos insumos para el tipo de cuadernillo que estamos trabajando</span>
    <span class="n">insumos_usar</span> <span class="o">=</span> <span class="n">insumos</span><span class="p">[</span><span class="n">tipo_cuadernillo</span><span class="p">]</span>

    <span class="n">n_pages</span> <span class="o">=</span> <span class="n">insumos_usar</span><span class="p">[</span><span class="s1">&#39;n_pages&#39;</span><span class="p">]</span>
    <span class="n">n_preguntas</span> <span class="o">=</span> <span class="n">insumos_usar</span><span class="p">[</span><span class="s1">&#39;n_preguntas&#39;</span><span class="p">]</span>
    <span class="n">subpreg_x_preg</span> <span class="o">=</span> <span class="n">insumos_usar</span><span class="p">[</span><span class="s1">&#39;subpreg_x_preg&#39;</span><span class="p">]</span>
    <span class="n">dic_cuadernillo</span> <span class="o">=</span> <span class="n">insumos_usar</span><span class="p">[</span><span class="s1">&#39;dic_cuadernillo&#39;</span><span class="p">]</span>
    <span class="n">dic_pagina</span> <span class="o">=</span> <span class="n">insumos_usar</span><span class="p">[</span><span class="s1">&#39;dic_pagina&#39;</span><span class="p">]</span>
    <span class="n">n_subpreg_tot</span> <span class="o">=</span> <span class="n">insumos_usar</span><span class="p">[</span><span class="s1">&#39;n_subpreg_tot&#39;</span><span class="p">]</span>

    <span class="n">insumos_total</span> <span class="o">=</span> <span class="n">n_pages</span><span class="p">,</span> <span class="n">n_preguntas</span><span class="p">,</span> <span class="n">subpreg_x_preg</span><span class="p">,</span> <span class="n">dic_cuadernillo</span><span class="p">,</span> <span class="n">dic_pagina</span><span class="p">,</span> <span class="n">n_subpreg_tot</span>

    <span class="k">return</span> <span class="n">insumos_total</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.get_mascara_lineas_horizontales" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_mascara_lineas_horizontales</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Genera máscara que detecta líneas horizontales que separan subpreguntas, para una imagen de recuadros de una pregunta
completa.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img_recuadros</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen de recuadros de una pregunta completa.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>mask_lineas_horizontales</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>máscara que contiene detección de líneas horizontales entre subpreguntas.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_mascara_lineas_horizontales</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39; Genera máscara que detecta líneas horizontales que separan subpreguntas, para una imagen de recuadros de una pregunta</span>
<span class="sd">    completa.</span>

<span class="sd">    Args:</span>
<span class="sd">        img_recuadros: imagen de recuadros de una pregunta completa.</span>

<span class="sd">    Returns:</span>
<span class="sd">        mask_lineas_horizontales: máscara que contiene detección de líneas horizontales entre subpreguntas.</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">px_naranjo</span> <span class="o">=</span> <span class="n">get_mask_imagen</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">,</span>
                                   <span class="n">lower_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                                       <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">109</span><span class="p">]),</span>
                                   <span class="n">upper_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">18</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]),</span>
                                   <span class="n">iters</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">revert</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">px_azul</span> <span class="o">=</span> <span class="n">get_mask_imagen</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">,</span> 
                                   <span class="n">lower_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
                                     <span class="n">upper_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">114</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]),</span>
                                     <span class="n">eliminar_manchas</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iters</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">px_negro</span> <span class="o">=</span> <span class="n">get_mask_imagen</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">,</span> 
                                <span class="n">lower_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">204</span><span class="p">]),</span>
                                    <span class="n">upper_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">179</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]),</span>
                                    <span class="n">eliminar_manchas</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iters</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">idx_naranjo</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">px_naranjo</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">idx_azul</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">px_azul</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">idx_negro</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">px_negro</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="n">gray</span><span class="p">[</span><span class="n">idx_azul</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
    <span class="n">gray</span><span class="p">[</span><span class="n">idx_negro</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
    <span class="n">gray</span><span class="p">[</span><span class="n">idx_naranjo</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">gray2</span> <span class="o">=</span> <span class="n">gray</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> 

    <span class="n">mean_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>    
    <span class="c1"># Replace values above the mean with 255</span>
    <span class="n">gray2</span><span class="p">[(</span><span class="n">gray2</span> <span class="o">&gt;</span> <span class="n">mean_value</span><span class="o">*</span><span class="mf">.95</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>

    <span class="c1"># Replace values below the mean with 0</span>
    <span class="n">gray2</span><span class="p">[(</span><span class="n">gray2</span> <span class="o">&lt;</span> <span class="n">mean_value</span><span class="o">*</span><span class="mf">.95</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">gray_limpio</span> <span class="o">=</span> <span class="n">eliminar_o_rellenar_manchas</span><span class="p">(</span><span class="n">gray2</span><span class="p">,</span> 
                                                       <span class="n">orientacion</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
                                                         <span class="n">limite</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">rellenar</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="p">]</span>

    <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_RECT</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="n">gray_dilated</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">gray_limpio</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_RECT</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

    <span class="n">gray_dilated2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">gray_dilated</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">kernel</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getStructuringElement</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_RECT</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

    <span class="n">gray_eroded</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">erode</span><span class="p">(</span><span class="n">gray_dilated2</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>


    <span class="n">gray_limpio2</span> <span class="o">=</span> <span class="n">eliminar_o_rellenar_manchas</span><span class="p">(</span><span class="n">gray_eroded</span><span class="p">,</span> 
                                                       <span class="n">orientacion</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
                                                         <span class="n">limite</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="n">rellenar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="n">gray_limpio3</span> <span class="o">=</span> <span class="n">eliminar_o_rellenar_manchas</span><span class="p">(</span><span class="n">gray_limpio2</span><span class="p">,</span> 
                                                       <span class="n">orientacion</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
                                                         <span class="n">limite</span><span class="o">=</span><span class="mi">220</span><span class="p">,</span> <span class="n">rellenar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">mask_lineas_horizontales</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bitwise_not</span><span class="p">(</span><span class="n">gray_limpio3</span><span class="p">)</span>



    <span class="k">return</span> <span class="n">mask_lineas_horizontales</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.get_pages_cuadernillo" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pages_cuadernillo</span><span class="p">(</span><span class="n">pagina_pregunta</span><span class="p">,</span> <span class="n">n_pages</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Obtiene número de página que se encuentran en la página izquierda y derecha de la imagen de cuadernillo
que se está analizando actualmente.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pagina_pregunta</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>página del cuadernillo a la que corresponde la pregunta siendo recortada actualmente.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>n_pages</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>n° de páginas total del cuadernillo.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pages</code></td>            <td>
                  <code>tuple</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tupla que contiene página izquierda y derecha del cuadernillo en sus dos elementos, respectivamente</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_pages_cuadernillo</span><span class="p">(</span><span class="n">pagina_pregunta</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">n_pages</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Obtiene número de página que se encuentran en la página izquierda y derecha de la imagen de cuadernillo</span>
<span class="sd">    que se está analizando actualmente.</span>

<span class="sd">    Args:</span>
<span class="sd">        pagina_pregunta: página del cuadernillo a la que corresponde la pregunta siendo recortada actualmente.</span>

<span class="sd">        n_pages: n° de páginas total del cuadernillo.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pages: tupla que contiene página izquierda y derecha del cuadernillo en sus dos elementos, respectivamente</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pages_original</span> <span class="o">=</span> <span class="n">n_pages</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="p">(</span><span class="n">pages_original</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">pagina_pregunta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">pages_original</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">pagina_pregunta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">pagina_pregunta</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">pages</span> <span class="o">=</span> <span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">pages</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.get_pregunta_inicial_pagina" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pregunta_inicial_pagina</span><span class="p">(</span><span class="n">dic_pagina</span><span class="p">,</span> <span class="n">pagina_pregunta</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Obtiene la pregunta con la que comienza la página siendo analizada. Esto se utiliza
    para poder "orientarse" dentro de la imagen y luego poder extraer la pregunta de
    interés.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>dic_pagina</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>diccionario que indica a qué página pertenece cada pregunta</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>pagina_pregunta</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>página en la que nos encontramos actualmente</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pregunta_base</code></td>            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>n° de pregunta en la que parte la página.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_pregunta_inicial_pagina</span><span class="p">(</span><span class="n">dic_pagina</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">pagina_pregunta</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Obtiene la pregunta con la que comienza la página siendo analizada. Esto se utiliza</span>
<span class="sd">        para poder &quot;orientarse&quot; dentro de la imagen y luego poder extraer la pregunta de</span>
<span class="sd">        interés.</span>

<span class="sd">    Args:</span>
<span class="sd">        dic_pagina: diccionario que indica a qué página pertenece cada pregunta</span>

<span class="sd">        pagina_pregunta: página en la que nos encontramos actualmente</span>

<span class="sd">    Returns:</span>
<span class="sd">        pregunta_base: n° de pregunta en la que parte la página.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">pagina_pregunta</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="p">(</span><span class="n">pagina_pregunta</span> <span class="ow">in</span> <span class="n">dic_pagina</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
        <span class="n">pregunta_base</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                      <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dic_pagina</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">pagina_pregunta</span><span class="p">])</span>

    <span class="k">else</span><span class="p">:</span>  <span class="c1"># Para la portada</span>
        <span class="n">pregunta_base</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">pregunta_base</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.get_subpregs_distintas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_subpregs_distintas</span><span class="p">(</span><span class="n">subpreg_x_preg</span><span class="p">,</span> <span class="n">dir_subpreg_rbd</span><span class="p">,</span> <span class="n">estudiante</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Se utiliza cuando el número de subpreguntas detectado es distinto al que debiese existir para
 la pregunta siendo analizada. Cuando ocurre anota en el excel de problemas en los datos, la serie que
 tuvo el problema, en qué pregunta se encontró el problema y cuántas subpreguntas se encontraron y cuántas
 deberían haber habido.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subpreg_x_preg</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>diccionario que contiene para cada pregunta, cuántas subpreguntas debiesen existir.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dir_subpreg_rbd</code></td>
            <td>
                  <code><span title="os.PathLike">PathLike</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>directorio donde se guardan subpreguntas.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>estudiante</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>serie del estudiante que tuvo el problema.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dic_diferencias</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>diccionario que contiene preguntas con diferencias en n° de subpreguntas</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_subpregs_distintas</span><span class="p">(</span><span class="n">subpreg_x_preg</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">dir_subpreg_rbd</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">estudiante</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Se utiliza cuando el número de subpreguntas detectado es distinto al que debiese existir para</span>
<span class="sd">     la pregunta siendo analizada. Cuando ocurre anota en el excel de problemas en los datos, la serie que</span>
<span class="sd">     tuvo el problema, en qué pregunta se encontró el problema y cuántas subpreguntas se encontraron y cuántas</span>
<span class="sd">     deberían haber habido.</span>

<span class="sd">    Args:</span>
<span class="sd">      subpreg_x_preg: diccionario que contiene para cada pregunta, cuántas subpreguntas debiesen existir.</span>

<span class="sd">      dir_subpreg_rbd: directorio donde se guardan subpreguntas.</span>

<span class="sd">      estudiante: serie del estudiante que tuvo el problema.</span>

<span class="sd">    Returns:</span>
<span class="sd">      dic_diferencias: diccionario que contiene preguntas con diferencias en n° de subpreguntas  &quot;&quot;&quot;</span>

    <span class="c1"># Creamos un dataframe con una fila por cada imagen de subpregunta asociada al estudiante</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dir_subpreg_rbd</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()</span> <span class="k">if</span> <span class="n">estudiante</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ruta&#39;</span><span class="p">])</span>

    <span class="c1"># Extraemos pregunta y subpregunta de la ruta y las hacemos columnas:</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;preg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ruta</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;p(\d{1,2})&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;subpreg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ruta</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;p(\d{1,2}_\d{1,2})&#39;</span><span class="p">)</span>

    <span class="c1"># N° de subpreguntas por pregunta:</span>
    <span class="n">df_resumen</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">preg</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
                              <span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>


    <span class="n">df_resumen</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="o">+</span><span class="n">df_resumen</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>

    <span class="c1"># Baseline es el n° verdadero de subpreguntas por pregunta</span>
    <span class="n">df_resumen</span><span class="p">[</span><span class="s1">&#39;baseline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subpreg_x_preg</span>
    <span class="n">df_resumen</span> <span class="o">=</span> <span class="n">df_resumen</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;origen&#39;</span><span class="p">})</span>
    <span class="n">dic_diferencias</span> <span class="o">=</span> <span class="n">df_resumen</span><span class="p">[</span><span class="n">df_resumen</span><span class="p">[</span><span class="s1">&#39;origen&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="n">df_resumen</span><span class="o">.</span><span class="n">baseline</span><span class="p">)]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">dic_diferencias</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.obtener_lineas_horizontales" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">obtener_lineas_horizontales</span><span class="p">(</span><span class="n">mask_lineas_rellenas</span><span class="p">,</span> <span class="n">n_pixeles_entre_lineas</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">minLineLength</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Identifica líneas para obtener puntos en el eje "y" para realizar el recorte a
subpreguntas.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>mask_lineas_rellenas</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>máscara que detecta líneas horizontales que separan subpreguntas. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>n_pixeles_entre_lineas</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>n° de píxeles mínimos que tiene que haber entre dos líneas horizontales.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>threshold</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>parámetro para detección de líneas. Aproximadamente representa cuántos puntos se necesitan para que
algo sea detectado como una línea</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>minLineLength</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>número mínimo de píxeles para que una línea detectada sea efectivamente retornada.</p>
              </div>
            </td>
            <td>
                  <code>200</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>lines</code></td>            <td>
                  <code>list[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>lista que contiene píxel vertical al que está asociado cada línea.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">obtener_lineas_horizontales</span><span class="p">(</span><span class="n">mask_lineas_rellenas</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">n_pixeles_entre_lineas</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span>
                                 <span class="n">threshold</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                 <span class="n">minLineLength</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Identifica líneas para obtener puntos en el eje &quot;y&quot; para realizar el recorte a</span>
<span class="sd">    subpreguntas.</span>

<span class="sd">    Args:</span>
<span class="sd">        mask_lineas_rellenas: máscara que detecta líneas horizontales que separan subpreguntas. </span>

<span class="sd">        n_pixeles_entre_lineas: n° de píxeles mínimos que tiene que haber entre dos líneas horizontales.</span>

<span class="sd">        threshold: parámetro para detección de líneas. Aproximadamente representa cuántos puntos se necesitan para que</span>
<span class="sd">            algo sea detectado como una línea</span>

<span class="sd">        minLineLength: número mínimo de píxeles para que una línea detectada sea efectivamente retornada.</span>

<span class="sd">    Returns:</span>
<span class="sd">        lines: lista que contiene píxel vertical al que está asociado cada línea. </span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="c1"># Detectamos líneas de acuerdo con parámetros entregados a función:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">HoughLinesP</span><span class="p">(</span><span class="n">mask_lineas_rellenas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span>
                            <span class="n">threshold</span><span class="o">=</span><span class="n">threshold</span><span class="p">,</span> <span class="n">minLineLength</span><span class="o">=</span><span class="n">minLineLength</span><span class="p">)</span>



    <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">indices_ordenados</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">lines</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
        <span class="n">lines_sorted</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">indices_ordenados</span><span class="p">]</span>

        <span class="n">puntoy</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">lines_sorted</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())))</span>
        <span class="n">puntoy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mask_lineas_rellenas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">puntoy</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">puntoy</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">puntoy</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">puntoy</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">puntoy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">n_pixeles_entre_lineas</span><span class="p">:</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Borramos líneas muy pegadas entre ellas:</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">del</span> <span class="n">puntoy</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">puntoy</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Pregunta no cuenta con subpreguntas</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.partir_imagen_por_mitad" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">partir_imagen_por_mitad</span><span class="p">(</span><span class="n">img_completa</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Parte una imagen por la mitad. Se ocupa para dividir imagen de cuadernillo
en sus dos páginas.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img_completa</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen completa de 2 páginas del cuadernillo </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>imgs_paginas</code></td>            <td>
                  <code>tuple[<span title="numpy.ndarray">ndarray</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tupla que contiene imagen de página izquierda y página derecha del cuadernillo.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">partir_imagen_por_mitad</span><span class="p">(</span><span class="n">img_completa</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Parte una imagen por la mitad. Se ocupa para dividir imagen de cuadernillo</span>
<span class="sd">    en sus dos páginas.</span>

<span class="sd">    Args:</span>
<span class="sd">        img_completa: imagen completa de 2 páginas del cuadernillo </span>

<span class="sd">    Returns:</span>
<span class="sd">        imgs_paginas: tupla que contiene imagen de página izquierda y página derecha del cuadernillo.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># Buscamos punto medio de imagen para dividirla en las dos</span>
    <span class="c1"># páginas del cuadernillo</span>
    <span class="n">punto_medio</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">img_completa</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="n">img_p1</span> <span class="o">=</span> <span class="n">img_completa</span><span class="p">[:,</span> <span class="p">:</span><span class="n">punto_medio</span><span class="p">]</span>  <span class="c1"># página izquierda</span>
    <span class="n">img_p2</span> <span class="o">=</span> <span class="n">img_completa</span><span class="p">[:,</span> <span class="n">punto_medio</span><span class="p">:]</span>  <span class="c1"># página derecha</span>

    <span class="n">imgs_paginas</span> <span class="o">=</span> <span class="n">img_p1</span><span class="p">,</span> <span class="n">img_p2</span>

    <span class="k">return</span> <span class="n">imgs_paginas</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.recorte_imagen" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">recorte_imagen</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Recorta márgenes de las imagenes</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen a ser recortada</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>x0</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dónde empieza recorte en eje x. Defaults to 110.</p>
              </div>
            </td>
            <td>
                  <code>110</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>x1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>N° de pixeles desde x0 hasta finalizar recorte. Defaults to 20.</p>
              </div>
            </td>
            <td>
                  <code>20</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y0</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dónde empieza recorte en eje y. Defaults to 50.</p>
              </div>
            </td>
            <td>
                  <code>50</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>N° de pixeles desde y0 hasta finalizar recorte. Defaults to 50.</p>
              </div>
            </td>
            <td>
                  <code>50</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>img_crop</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen cortada</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">recorte_imagen</span><span class="p">(</span><span class="n">img</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">x0</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">x1</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y0</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y1</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recorta márgenes de las imagenes</span>

<span class="sd">    Args:</span>
<span class="sd">        img: imagen a ser recortada</span>
<span class="sd">        x0: Dónde empieza recorte en eje x. Defaults to 110.</span>
<span class="sd">        x1: N° de pixeles desde x0 hasta finalizar recorte. Defaults to 20.</span>
<span class="sd">        y0: Dónde empieza recorte en eje y. Defaults to 50.</span>
<span class="sd">        y1: N° de pixeles desde y0 hasta finalizar recorte. Defaults to 50.</span>

<span class="sd">    Returns:</span>
<span class="sd">        img_crop: imagen cortada</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">img_crop</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">x0</span><span class="p">:</span><span class="n">x</span><span class="o">-</span><span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">:</span><span class="n">y</span><span class="o">-</span><span class="n">y1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">img_crop</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="simce.proc_imgs.save_pregunta_completa" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_pregunta_completa</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">,</span> <span class="n">dir_subpreg_rbd</span><span class="p">,</span> <span class="n">estudiante</span><span class="p">,</span> <span class="n">pregunta_selec</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Guarda pregunta completa en casos de preguntas que no tienen subpreguntas.
    <strong>No retorna nada</strong></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>img_recuadros</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>imagen de recuadros de una pregunta completa.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dir_subpreg_rbd</code></td>
            <td>
                  <code><span title="os.PathLike">PathLike</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>directorio donde se guarda imágenes de subpreguntas y preguntas</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>estudiante</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>identificador del estudiante asociado a pregunta</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>pregunta_selec</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pregunta siendo exportada actualmente.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>simce\proc_imgs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_pregunta_completa</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                            <span class="n">dir_subpreg_rbd</span><span class="p">:</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span>
                            <span class="n">estudiante</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">pregunta_selec</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span><span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Guarda pregunta completa en casos de preguntas que no tienen subpreguntas.</span>
<span class="sd">        **No retorna nada**</span>

<span class="sd">    Args:</span>
<span class="sd">        img_recuadros: imagen de recuadros de una pregunta completa.</span>

<span class="sd">        dir_subpreg_rbd: directorio donde se guarda imágenes de subpreguntas y preguntas</span>

<span class="sd">        estudiante: identificador del estudiante asociado a pregunta</span>

<span class="sd">        pregunta_selec: pregunta siendo exportada actualmente.</span>



<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pregunta no cuenta con subpreguntas, se guardará imagen&#39;</span><span class="p">)</span>
    <span class="n">file_out</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
        <span class="n">dir_subpreg_rbd</span> <span class="o">/</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">estudiante</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">pregunta_selec</span><span class="si">}</span><span class="s1">.jpg&#39;</span><span class="p">)</span>

    <span class="c1"># Si la pregunta es más larga que ancha, la dejamos a lo ancho:</span>
    <span class="k">if</span> <span class="n">img_recuadros</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">img_recuadros</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">img_recuadros</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">img_recuadros</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">ROTATE_90_CLOCKWISE</span><span class="p">)</span>

    <span class="c1">#n_subpreg = 1</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">file_out</span><span class="p">,</span> <span class="n">img_recuadros</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>